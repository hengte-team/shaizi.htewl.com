<!doctype html>
<html lang="zh-CN">
<head>
    <include file="include/head" title="在线充值" />
	<style>
	.header{ height:50px; background:#ff8a00; line-height:50px; color:#fff; text-align:center; font-size:16px;}
	.charge-header{ background:#ff8a00; padding:20px 10px; color:#fff;;}
	.charge-header .money{ font-size:24px;}
	.orderpay-pay{ padding:10px;}
	.orderpay-pay input[type=text]{ height:30px; line-height:30px; width:150px; border:1px solid #ccc;}
	.pay{ display:inline-block; width:45%; height:40px; line-height:40px; background:blue; color:#fff; border-radius:5px; text-align:center;}
	.wxpay{ background:#94C12A;}
	.alipay{ background:#4F7FCA}
	</style>
</head>

<body>
    <div class="header">
		在线充值
		<span class="left">
			<a href="{:U('ucenter')}"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></a>
		</span>
	</div>
	
	<div class="charge-main">
		<form method="post" action="{:U('Index/charge')}" namd="form" id='form'>
			<div class="charge-header">
				<p class="money">￥{$user.money}</p>
				<p>账户可用月</p>
			</div>
			
			<div class="charge-money" style=" padding:5px 10px;">
				<div class="orderpay-pay">
					<p>充值金额：<input type="text" id="money" name="money" /></p>
					<p style=" padding-top:10px;">
						<a href="javascript:;" onclick="form_submit('wxpay');" class="pay wxpay">微信安全支付</a>
						<a href="javascript:;" onclick="form_submit('alipay');" class="pay alipay">支付宝支付</a>
					</p>
					
					<input type="hidden" id="payway" name="payway" value="" />
					
					<script>
					$(document).ready(function(){
						// 默认选中第一个支付方式
						$("input[name='payway']").eq(0).attr('checked','checked');
					});
					</script>
				</div>
			</div>
			<div class="charge-btn" style=" padding:5px 10px;">
				<script>
				function form_submit(payway){
					$("#payway").val(payway);
					money = parseFloat($("#money").val());
					if(isNaN(money) || money <=0){
						alert('请输入有效的充值金额');
						return false;
					}
					form.submit();
				}
				</script>
			</div>
		</form>
	</div>
	<style>
	.logs{ padding:5px 10px;}
	.logs table{ width:100%; line-height:30px;}
	.page{ padding:10px;}
	.page a{ margin-right:5px;}
	</style>
	
	<div class="logs">
		<table boder="0" cellspacing="1">
			<tr>
				<th>金额</th>
				<th>支付方式</th>
				<th>日期</th>
				<th>状态</th>
				<th>操作</th>
			</tr>
			<volist name="list" id="vo">
			<tr>
				<td>￥{$vo.money}</td>
				<td>
					<if condition="$vo['payway'] eq 'wxpay'">微信支付<else/>支付宝</if>
				</td>
				<td>{$vo.create_time|date="Y-m-d",###}</td>
				<td>
					<if condition="$vo['status'] eq 1">待支付
					<elseif condition="$vo['status'] eq 2"/>已支付
					<else/>未知
					</if>
				</td>
				<td>
					<if condition="$vo['status'] eq 1">
						<a href="{:U($vo['payway'].'?charge_id='.$vo['id'])}">去支付</a>
					<elseif condition="$vo['status'] eq 2"/>
						<a href="{:U('charge_detail?id='.$vo['id'])}">查看</a>
					<else/>-
					</if>
				</td>
			</tr>
			</volist>
			<empty name="list">
			<tr>
				<td colspan="4" class="empty">暂时没有记录</td>
			</tr>
			</empty>
		</table>
	</div>
	<div class="page">{$page}</div>
	
	<include file="include/bottom" />


</body>
</html>